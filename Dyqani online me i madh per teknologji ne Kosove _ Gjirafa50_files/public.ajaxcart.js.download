var AjaxCart={loadWaiting:false,usepopupnotifications:false,topcartselector:'',topwishlistselector:'',flyoutcartselector:'',shoppingcartselector:'',ordertotalsselector:'',localized_data:false,init:function(usepopupnotifications,topcartselector,topwishlistselector,flyoutcartselector,shoppingcartselector,ordertotalsselector,localized_data){this.loadWaiting=false;this.usepopupnotifications=usepopupnotifications;this.topcartselector=topcartselector;this.topwishlistselector=topwishlistselector;this.flyoutcartselector=flyoutcartselector;this.shoppingcartselector=shoppingcartselector;this.ordertotalsselector=ordertotalsselector;this.localized_data=localized_data;},setLoadWaiting:function(display){displayAjaxLoading(display);this.loadWaiting=display;},addproducttocart_catalog:function(urladd){if(this.loadWaiting!==false){return;}
this.setLoadWaiting(true);$.ajax({cache:false,url:urladd,type:"POST",success:this.success_process,complete:this.resetLoadWaiting,error:this.ajaxFailure});},addproducttocart_details:function(urladd,formselector){if(this.loadWaiting!==false){return;}
this.setLoadWaiting(true);$.ajax({cache:false,url:urladd,data:$(formselector).serialize(),type:"POST",success:this.success_process,complete:this.resetLoadWaiting,error:this.ajaxFailure});},addproducttocart_details_redirect:function(urladd,formselector){if(this.loadWaiting!==false){return;}
this.setLoadWaiting(true);$.ajax({cache:false,url:urladd,data:$(formselector).serialize(),type:"POST",success:function(data){if(data.success==true){window.location.replace(window.location.origin+"/cart");}else{displayBarNotification(data.message,'error');}},complete:this.resetLoadWaiting,error:this.ajaxFailure});},addproducttocomparelist:function(urladd){if(this.loadWaiting!==false){return;}
this.setLoadWaiting(true);$.ajax({cache:false,url:urladd,type:"POST",success:this.success_process,complete:this.resetLoadWaiting,error:this.ajaxFailure});},updatecartitemamount:function(urladd){if(this.loadWaiting!==false){return;}
this.setLoadWaiting(true);$.ajax({cache:false,url:urladd,type:"POST",success:this.success_process,complete:this.resetLoadWaiting,error:this.ajaxFailure});},success_process:function(response){if(response.updatetopcartsectionhtml){$(AjaxCart.topcartselector).html(response.updatetopcartsectionhtml);}
if(response.updatetopwishlistsectionhtml){$(AjaxCart.topwishlistselector).html(response.updatetopwishlistsectionhtml);}
if(response.updateflyoutcartsectionhtml){$(AjaxCart.flyoutcartselector).replaceWith(response.updateflyoutcartsectionhtml);if(response.productId){$('#flyout-cart').addClass('flyout-cart-active');$('.cart-item').removeClass("border border-primary shadow-halo animate-pulse");$(`#${response.productId}`).addClass("border border-primary shadow-halo animate-pulse");$('#flyout-cart').animate({opacity:1},300);}}
if(response.updatecartsectionhtml){$('#cart-order-summary-content').replaceWith(response.updatecartsectionhtml);}
if(response.updateordertotalssectionhtml){$(AjaxCart.ordertotalsselector).replaceWith(response.updateordertotalssectionhtml);}
if(response.updatecartordertotalssectionhtml){$('.cart-footer').replaceWith(response.updatecartordertotalssectionhtml);}
if(response.updatecartordertotalssectionhtml===""){$('.side-3').remove();$('.center-3').css("width","100%")}
if(response.message){if(response.success===true&&!response.productId){if(AjaxCart.usepopupnotifications===true){displayPopupNotification(response.message,'success',true);}
else{displayBarNotification(response.message,'success',3500);}}else if(response.success===false){if(AjaxCart.usepopupnotifications===true){displayPopupNotification(response.message,'error',true);}
else{displayBarNotification(response.message,'error',0);}}
return false;}
if(response.redirect){location.href=response.redirect;return true;}
return false;},resetLoadWaiting:function(){AjaxCart.setLoadWaiting(false);},ajaxFailure:function(){alert(this.localized_data.AjaxCartFailure);}};