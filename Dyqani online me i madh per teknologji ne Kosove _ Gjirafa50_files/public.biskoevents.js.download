function sendClickLogoEvent(){bsk('event','clickTo_logo');};function sendLogOutEvent(){bsk('event','user_logout_start');};function sendClickToFooterEvent(event){var linkValue=event.target.innerText;var content={name:linkValue}
bsk('event','clickTo_footer',content);};function sendChangeLanguageEvent(element){const langName=element.querySelector('img').getAttribute('title');var content={name:langName,};bsk('event','clickTo_language',content);};function sendClickToCurrencyEvent(element){var content={name:element.textContent}
bsk('event','clickTo_curency',content);};function sendCookiesMoreEvent(){bsk('event','cookies_more');};function sendCookiesConsentEvent(){bsk('event','cookies_consent');};function SendDetailsEvent(productId,productName,detailType){var content={id:productId.toString(),name:productName,type:detailType};bsk('event','product_details',content);};function sendFilterByPriceEvent(path,values,eventName){let content={};if(path.startsWith("/")&&path!=="/search"){content={type:'category',name:'price',value:values.toString()};}
else if(path.startsWith("/search")){content={type:'search',name:'price',value:values.toString()};}
else{content={type:'store',name:'price',value:values.toString()};}
bsk('event',eventName,content);};function sendFilterAddOrRemoveEvent(name,specification,object){const location=getPathLocation();const content={name:specification,value:name,type:location};if(!$(object).prop('checked')){bsk('event','filter_remove',content);}
else{bsk('event','filter_add',content);}}
function sendExpandCollapseEvent(event){var $label=$(event.target).closest('ul').find('.item');var attributeName=$(event.target).closest('ul').find('.sub-spec-name').text().trim();var pathType=getPathLocation();var content={type:pathType,name:attributeName};if($label.hasClass('hidden')){bsk('event','filter_expand',content);}else{bsk('event','filter_collapse',content);}}
function sendContinueShoppingEvent(){bsk('event','continue_shopping');}
function sendOneClickBuyEvent(content){bsk('event','one_click_buy',content);}
function sendPageNextEvent(settings,urlBuilder,pageNumber){var content={};pageNumber=parseInt(pageNumber)
if(settings.homepage&&settings.firstClick>0){content.type='homepage';content.quantity=pageNumber;}else if((urlBuilder.params.baseUrl).includes("categoryId=")){content.id=urlBuilder.params.baseUrl.split("=")[1];content.type='category';content.quantity=pageNumber;}else if(settings.relatedProducts&&settings.productId){content.id=settings.productId.toString();content.type='product';content.quantity=pageNumber;}else if(settings.browserPath=="/search"){content.name=urlBuilder.params.query.q;content.type='search';content.quantity=pageNumber;}
if(pageNumber!=0&&content.type!=null&&content.quantity>1){bsk('event','page_next',content);}}
function sendRemoveListEvent(items,type){const productsList=JSON.parse(items);const productIds=[];let quantity=0;for(const item of productsList){productIds.push(item.ProductId.toString());quantity+=item.Quantity;}
const content={type:type,quantity:quantity,listproducts:productIds};bsk('event','remove_list',content);}
function sendGjirafaFlexInfoEvent(id,name){var content={id:id,name:name};bsk('event','gjirafaflex_info',content);}
function sendSearchResultsClickEvent(element,title){const resultposition=element.parentElement.dataset.position;var content={type:'product',id:element.dataset.productid.toString(),name:title.toString(),value:q.value,resultposition:resultposition.toString(),results:Array.from(document.querySelectorAll('.product-item'),item=>item.dataset.productid.toString())};bsk('event','search_results_click',content);}
function sendSelectedAddressEvent(addressType){let selectEl=addressType==='invoice'?document.getElementById("billing-address-select"):document.getElementById("shipping-address-select");let client;let selectedOption;if(selectEl){selectedOption=selectEl.options[selectEl.selectedIndex];}
if(selectedOption&&selectedOption.getAttribute('value')){if(addressType=='invoice'){client={type:selectedOption.getAttribute('data-clienttype'),firstname:selectedOption.getAttribute('data-firstname'),lastname:selectedOption.getAttribute('data-lastname'),address:selectedOption.getAttribute('data-streetaddress'),city:selectedOption.getAttribute('data-city'),country:selectedOption.getAttribute('data-country'),email:selectedOption.getAttribute('data-email'),number:selectedOption.getAttribute('data-number'),company:selectedOption.getAttribute('data-company'),fiscalnumber:selectedOption.getAttribute('data-fiscalnumber'),businessnumber:null,tvshnumber:null,};}}else{let prefix=addressType==='invoice'?'Billing':'Shipping';client={type:$("input[name='CustomerType']:checked").val(),firstname:$(`#${prefix}NewAddress_FirstName`).val(),lastname:$(`#${prefix}NewAddress_LastName`).val(),address:$(`#${prefix}NewAddress_Address1`).val(),city:$("#state-select").val(),country:$("#country-select").val(),email:$(`#${prefix}NewAddress_Email`).val(),number:$(`#${prefix}NewAddress_PhoneNumber`).val(),company:$(`#${prefix}NewAddress_Company`).val(),fiscalnumber:$(`#${prefix}NewAddress_FiscalNumber`).val(),businessnumber:null,tvshnumber:null,};}
if(client){bsk('event','address',{client,address:{type:addressType}});}
if(shipToSameAddress(addressType)){bsk('event','address',{client,address:{type:'transport'}});}}
function shipToSameAddress(addressType){if(addressType=='invoice'){const shipToSameAddressInput=document.querySelector('input[name="ShipToSameAddress"]');const isShipToSameAddressChecked=shipToSameAddressInput.checked;return isShipToSameAddressChecked;}}
function extractNumericValue(text){return text.replace(/[^\d.,]/g,'');}
function sendBiskoPurchaseEvent(){try{const products=extractProducts();const orderTotalElement=document.querySelector(".value-summary span");const orderTotal=orderTotalElement?orderTotalElement.textContent.trim():'';const paymentMethod=document.querySelector(".payment-method .value").textContent.trim();const numericOrderTotal=extractNumericValue(orderTotal);const transportMethod=document.querySelector(".shipping-method .value").textContent.trim();const content={ids:products.map(product=>product.id),names:products.map(product=>product.name),quantities:products.map(product=>product.quantity),gjirafaflex:products.map(product=>product.hasWarranty),comment:$('#order-comment').val(),"order.arrivalestimate":$('.order-arrival').attr('estimated-date'),"order.arrivalrequest":$('input[name="customer-entered-delivery-date"]').val(),"order.price":numericOrderTotal,"payment.method":paymentMethod,"transport.method":transportMethod};const invoiceDetails=getClientDetails(".billing-info","invoice");const shippingDetails=getClientDetails(".shipping-info","transport");const mergedContent={...content,...invoiceDetails,...shippingDetails};bsk('event','purchase',mergedContent);}
catch(error){}}
function extractProducts(){const productInfoElements=document.querySelectorAll(".product-info");const products=[];productInfoElements.forEach(element=>{const nameElement=element.querySelector(".product-name");const priceElement=element.querySelector(".product-unit-price");const quantityElement=element.querySelector(".product-quantity");const hasWarrantyElement=element.querySelector(".px-1");const price=parseFloat(priceElement.textContent.trim());const quantity=parseInt(quantityElement.getAttribute("quantity"),10);const hasWarranty=!!hasWarrantyElement;const id=nameElement.getAttribute("product-id");products.push({name:nameElement.textContent.trim(),price:price,quantity:quantity,hasWarranty:hasWarranty,id:id});});return products;}
function getClientDetails(containerSelector,prefix){const container=document.querySelector(containerSelector);function extractTrimmedTextContent(element){var value='';if(element){element.childNodes.forEach(node=>{if(node.nodeType===Node.TEXT_NODE){value+=node.textContent.trim();}});}
return value;}
const nameElement=container.querySelector('.name');const name=extractTrimmedTextContent(nameElement);const emailElement=container.querySelector('.email');const email=extractTrimmedTextContent(emailElement);const companyElement=container.querySelector('.company');const company=extractTrimmedTextContent(companyElement);const phoneElement=container.querySelector('.phone');const phoneNumber=extractTrimmedTextContent(phoneElement);const addressElement=container.querySelector('.address1');const address=extractTrimmedTextContent(addressElement);const cityElement=container.querySelector('.city-state-zip');const city=extractTrimmedTextContent(cityElement);const countryElement=container.querySelector('.country');const country=extractTrimmedTextContent(countryElement);const nameParts=name.split(' ');const firstName=nameParts[0]||'';const lastName=nameParts.slice(1).join(' ')||'';const type=company?'Company':'Individual'
const staticData={[`client.${prefix}_type`]:type,[`client.${prefix}_firstname`]:firstName||"",[`client.${prefix}_lastname`]:lastName||"",[`client.${prefix}_email`]:email||"",[`client.${prefix}_number`]:phoneNumber||"",[`client.${prefix}_company`]:company||"",[`client.${prefix}_address`]:address||"",[`client.${prefix}_city`]:city||"",[`client.${prefix}_country`]:country||""};return staticData;}
function sendViewContentEvent(type,model){var content={type:type,name:'',id:'',};if(type=='category'||type=='brand'||type=='product'){content.name=model.Name;content.id=model.Id.toString();if(type=='product'){content.category=[];for(var i=0;i<model.Breadcrumb.CategoryBreadcrumb.length;i++){content.category.push(model.Breadcrumb.CategoryBreadcrumb[i].Name);}}}
bsk('event','viewcontent',content);};function sendGalleryEvent(id,name,quantity,type){let eventName;switch(type){case 'open':eventName='gallery_open';break;case 'close':eventName='gallery_close';break;case 'previous':eventName='gallery_previous';break;case 'next':eventName='gallery_next';break;}
bsk('event',eventName,{id:id,name:name,quantity:quantity.toString(),value:getImgIndex()});}
function getImgIndex(){let counterEl=document.getElementsByClassName('pswp__counter')[0].innerHTML;let imgInd=counterEl.split(' / ')[0];return imgInd;}
function getImgIndexOnViewContent(){try{let counterEl=document.getElementsByClassName('swiper-slide-active')[1].ariaLabel;let imgInd=counterEl.split(' / ')[0];return imgInd;}catch(error){console.log(error);}}
function sendHomepageFeaturedProductEvent(eventType,element){var itemType=$(element).attr('type');var itemId=$(element).find('.product-item').attr('data-productid');var itemName=$(element).find('h2').text().trim();var imageUrl=$(element).find('.picture img').attr('src');var itemPrice=$(element).find('.price:first').text();var content={type:'product',name:itemName,id:itemId,description:itemType=='rec'?'recommender':'default',category:[],imageUrl:imageUrl,keywords:[],value:extractNumericValue(itemPrice),};bsk('event',eventType,content);}
function sendHomepageProductEvent(){$('.item-grid .item-box:lt(20)').each(function(index,element){sendHomepageFeaturedProductEvent('impression',element);appendUtmToHomepageProductUrl(element)});}
function sendFreshchatClickedEvent(){bsk('event','freshchat_clicked');}
function sendBannerEvent(eventType,slideId,imageUrl,slidePosition){var content={id:slideId,type:'banner',imageUrl:imageUrl,slidePosition:slidePosition,};bsk('event',eventType,content);}
function smallBannerEvent(eventType,imageUrl){var content={type:'banner',imageUrl:imageUrl,};bsk('event',eventType,content);}
function leaveSiteEvent(event,date){var content={date:date,};bsk('event',event,content);}
function scrollDepthEvent(event,date,percentage,page){var content={date:date,percentage:percentage,page:page,};bsk('event',event,content);}
function flexNotSelectedEvent(){bsk('event','flex_not_selected');}
function termsAndConditionsNotSelectedEvent(form){bsk('event','terms_and_conditions_not_selected',form);}