function sendLoginEvent(){bsk('event','user_login_start');gtag('event','login');}
function sendShareEvent(id,name,socialMedia){var data={id:id,name:name};function getContent(type,event){if(event==='google'){return{method:type,content_type:'product',item_id:data.id};}}
$(socialMedia).click(function(){gtag('event','share',getContent(socialMedia,'google'));});}
function sendShareEvent(event,model){var iconType='';var classes=event.target.classList;for(var i=0;i<classes.length;i++){var currentClass=classes[i];if(currentClass.startsWith('icon-')){iconType=currentClass.replace('icon-','');break;}}
if(iconType!==''){var analyticsData={item_id:model.Id,method:iconType,content_type:'product'};var biskoData={id:model.Id,type:iconType,name:model.Name};gtag('event','share',analyticsData);bsk('event','share',biskoData);}}
function sendSortEvent(browserPath,fetchUrl,sortType){const content={};if(browserPath==="/search"){const urlParams=new URLSearchParams(window.location.search);const searchQuery=urlParams.get('q');content.name=searchQuery;content.type="search";}else{const categoryId=fetchUrl.substring(fetchUrl.indexOf('categoryId=')+11);const categoryName=browserPath.replace(/^\//,'').replace(/\//g,',');content.id=categoryId;content.name=categoryName;content.type="category";}
if(sortType!=null){content.value=sortType;bsk('event','product_sort',{id:content.id,name:content.name,category:content.id,type:content.value});gtag('event','sort_products',{item_id:content.id,item_name:content.name,sort_type:content.value,current_location:content.type});}};function getPathLocation(){if("@path".startsWith("/search")){return 'search';}else{return 'category';}}
function sendCheckboxChangeEvent(name,specification,object){const location=getPathLocation();if(!$(object).prop('checked')){gtag('event','filter_remove',{specification_name:specification,selected_value:name,current_location:location});bsk('event','filter_remove',{name:specification,value:name,type:location});}
else{gtag('event','filter_add',{specification_name:specification,selected_value:name,current_location:location});bsk('event','filter_add',{name:specification,value:name,type:location});}}
function SendDeleteFromCartEvent(productId,productName,unitPrice,quantity,type){if(type==="cart"){gtag('event','remove_from_cart',{items:[{item_id:productId,item_name:productName,price:unitPrice,quantity:quantity}]});}
bsk('event','remove_product',{id:productId,name:productName,type:type});}
function sendOutOfStockEvent(buttonValue,name,id){if(buttonValue!=='Çabonohu'){gtag('event','out-of-stock',{'item_name':name,'item_id':id});bsk('event','out_of_stock',{id:id,name:name});}}
function sendProductsRecommendedEvent(name,tab,recommendedProductsId){var recommendedType;switch(tab){case 1:recommendedType="Most sold";break;case 2:recommendedType="Most viewed";break;case 3:recommendedType="Most rated";break;}
gtag('event','products_recommended',{category_name:name,recommended_type:recommendedType,product_id_array:recommendedProductsId});bsk('event','products_recommended',{category:[name],type:recommendedType,product_id_array:recommendedProductsId});}
function sendProductClickEvent(event,categoryName){if(event.target.closest('.product')){const link=event.target.closest('.product').querySelector('a');const productId=link.getAttribute('productId');const name=link.textContent;const parentDiv=event.target.closest('.tab1, .tab2, .tab3');const parentDivClass=parentDiv?parentDiv.classList[0]:null;var recommendedType;switch(parentDivClass){case 'tab1':recommendedType="Most sold";break;case 'tab2':recommendedType="Most viewed";break;case 'tab3':recommendedType="Most rated";break;}
gtag('event','products_recommended_clicked',{category_name:categoryName,recommended_type:recommendedType,product_id:productId,product_name:name});bsk('event','products_recommended_clicked',{category:categoryName,type:recommendedType,id:productId,name:name});}}
function sendMethodEvent(eventName,paymentMethod){var productsArray=[];var currency;$('.product-info').each(function(){var productElement=$(this);var content=extractProductData(productElement,currency);currency=content.currency;productsArray.push(content);});var discountElement=$('.discount-total span.discount');var discount=0;if(discountElement.length>0){var discountValue=discountElement.attr('discount');if(discountValue){discount=parseFloat(discountValue.replace(/[^0-9.,-]/g,'').replace(',','.'));}}
var eventData={currency:currency,discount:discount,items:productsArray};if(paymentMethod){eventData.payment_type=paymentMethod;bsk('event','payment_method',{type:paymentMethod});}
if(eventName==='add_shipping_info'){var selectedShippingMethod=$('input[name="shippingoption"]:checked').closest('label').data('shipping-method');eventData.shipping_tier=selectedShippingMethod;bsk('event','transport_method',{type:selectedShippingMethod});}
gtag('event',eventName,eventData);}
function sendTransportMethodEvent(){sendMethodEvent('add_shipping_info');}
function sendPaymentMethodEvent(){var selectedPaymentMethod=$('input[name="paymentmethod"]:checked');if(selectedPaymentMethod.length>0){var paymentMethodName=selectedPaymentMethod.closest('label').find('label').text();sendMethodEvent('add_payment_info',paymentMethodName);}}
function sendCheckoutEvent(itemsArray,discountCoupons){var extractedItems=[];var currency;for(var i=0;i<itemsArray.length;i++){var item=itemsArray[i];if(!currency){currency=item.UnitPrice.replace(/[\d.,\s]/g,'').trim()==='€'?'EUR':item.UnitPrice.replace(/[\d.,\s]/g,'').trim();}
var extractedItem={item_name:item.ProductName,item_id:item.ProductId,price:parseFloat(item.UnitPrice.replace(/[^\d.,]/g,'').trim()),quantity:item.Quantity,};extractedItems.push(extractedItem);}
gtag('event','begin_checkout',{currency:currency,coupon:discountCoupons[0]||null,items:extractedItems});bsk('event','cart',{ids:itemsArray.map(item=>item.ProductId.toString()),quantities:itemsArray.map(item=>item.Quantity.toString()),names:itemsArray.map(item=>item.ProductName),prices:itemsArray.map(item=>item.SubTotal),gjirafaflex:itemsArray.map(item=>item.SciHasWarranty),coupons:discountCoupons[0]||null,oldprices:null})}
function sendAddToCartEvent(id,name,price,type){var items=[{item_id:id}];if(name!==null){items[0].item_name=name;}
if(price!==null){items[0].price=price;}
if(type==='cart'){gtag('event','add_to_cart',{items:items});}else if(type==='wishlist'){gtag('event','add_to_wishlist',{items:items});}
bsk('event','add_product',{id:id,type:type,name:name,quantity:1});}