var script=document.querySelector('[src="/js/public.algoliaevents.js"]');var userToken=script.dataset.userToken;var storeId=script.dataset.storeId;var formattedIndex=getIndexName();var ALGOLIA_INSIGHTS_SRC="https://cdn.jsdelivr.net/npm/search-insights@2.13.0";!function(e,a,t,n,s,i,c){e.AlgoliaAnalyticsObject=s,e[s]=e[s]||function(){(e[s].queue=e[s].queue||[]).push(arguments)},i=a.createElement(t),c=a.getElementsByTagName(t)[0],i.async=1,i.src=n,c.parentNode.insertBefore(i,c)}(window,document,"script",ALGOLIA_INSIGHTS_SRC,"aa");aa('init',{appId:'ZKZYCDAUL2',apiKey:'bf10feb4ae270da5f36ef5abf356d6d6'});aa('setUserToken',userToken);function produceClickedProductEvent(productId){const queryId=$('#search-query-id').val();if(queryId){localStorage.setItem("search-query-id",queryId)
const position=parseInt($(`div[data-productid="${productId}"]`).parent().data('position'));if(!isNaN(position)){aa('clickedObjectIDsAfterSearch',{eventName:'Click_Product_After_Search',index:formattedIndex,queryID:queryId,objectIDs:[`${productId}`],positions:[position],});}}else{localStorage.removeItem("search-query-id")}}
function produceViewedProductEvent(productIds){aa('viewedObjectIDs',{index:formattedIndex,eventName:'View_Product',objectIDs:productIds});}
function produceAddedToCartEvent(productId){const queryId=localStorage.getItem('search-query-id');if(queryId){aa('addedToCartObjectIDsAfterSearch',{eventName:"Add_To_Cart",index:formattedIndex,queryID:queryId,objectIDs:[`${productId}`],});}}
function producePurchasedProductsEvent(productIds){const queryId=localStorage.getItem('search-query-id');if(queryId){aa('purchasedObjectIDsAfterSearch',{eventName:'Purchase',index:formattedIndex,objectIDs:productIds});}}
function getIndexName(){let indexName=undefined;switch(storeId){case '2':indexName=`gjirafa50shop.xk_2_product`;break;case '1':indexName=`gjirafa50shop.mk_1_product`;break;case '3':indexName=`gjirafa50shop.al_3_product`;break;default:indexName=`gjirafa50shop.xk_2_product`;}
return indexName;}